{ "$schema": "https://vega.github.io/schema/vega-lite/v4.json", 
"width": 500,
 "height": 400, 
 "title": "Olympic Rio 2016 Athletes BMI",
  "data":  
  { 
    "url": "https://raw.githubusercontent.com/chozhen98/FIT3179/main/athletes_v5.csv" 
  }, 
  "params": 
  [
    {
      "name": "age_above",
      "value": 0,
      "bind": 
      {
        "input": "range",
        "min": 0,
        "max": 65,
        "step": 1,
        "name": "Minimum Age: "
      }
    },
    {
      "name": "age_below",
      "value": 65,
      "bind": 
      {
        "input": "range",
        "min": 0,
        "max": 65,
        "step": 1,
        "name": "Maximum Age: "
      }
    },
    {
      "name": "bmi_above",
      "value": 0,
      "bind": 
      {
        "input": "range",
        "min": 0,
        "max": 45,
        "step": 0.1,
        "name": "Minimum BMI: "
      }
    },
    {
      "name": "bmi_below",
      "value": 45,
      "bind": 
      {
        "input": "range",
        "min": 0,
        "max": 45,
        "step": 0.1,
        "name": "Maximum BMI: "
      }
    }

  ],




  "transform": 
  [
    {"filter": "datum.Weight > 0"},
    {"filter": "datum.Height > 0"},
    {"filter": "datum.Age > age_above"},
    {"filter": "datum.Age < age_below"},
    {"calculate": "datum.Weight/((datum.Height)*2)",
    "as": "BMI"},
    {"filter": "datum.Weight/((datum.Height)*2) > bmi_above"},
    {"filter": "datum.Weight/((datum.Height)*2) < bmi_below"}
  ],
  "selection": 
    {
      "sex_highlight": 
      {
        "type": "multi",
        "fields": ["Sex"],
        "bind": "legend"
      }
  },
  "mark": "circle",
   "encoding":
    { 
      "x": 
      { 
      "field": "Age",
      "type": "quantitative", 
      "title": "Age" 
      }, 
        "y":
      { 
      "field": "BMI",
      "type": "quantitative",
      "title": "BMI"
      },
      "color": 
      {
        "field": "Sex",
        "type": "nominal"
      },
      "opacity": 
      {
        "condition": 
        { 
          "selection": "sex_highlight",
          "value": 0.6
        },
        "value": 0
      },
      "tooltip":
      [
        {"field": "Name", "type": "nominal"},
        {"field": "Continent", "type": "nominal"},
        {"field": "Country", "type": "nominal"},
        {"field": "Age", "type": "quantitative"},
        {"field": "Sex", "type": "nominal"},
        {"field": "Height", "type": "quantitative", "title": "Height(cm)"},
        {"field": "Weight", "type": "quantitative", "title": "Weight(kg)"},
        {"field": "Sport", "type": "nominal"}
        
      ]
    }

} 
